/* Mobile Touch Interaction Fixes */

/* Enhanced mobile readability for information boxes */
@media (max-width: 768px) {
  /* Stronger frosted glass effect on mobile for better readability */
  .bg-red-500\/10,
  .bg-orange-500\/10,
  .bg-purple-500\/10,
  .bg-blue-500\/10,
  .bg-green-500\/10,
  .bg-yellow-500\/10,
  .bg-indigo-500\/10,
  .bg-pink-500\/10,
  .bg-cyan-500\/10,
  [class*="backdrop-blur-sm"],
  [class*="backdrop-blur-md"] {
    background-color: rgba(0, 0, 0, 0.85) !important;
    backdrop-filter: blur(16px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(16px) saturate(180%) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4) !important;
  }

  /* Enhanced text contrast on mobile */
  .text-red-300,
  .text-orange-300,
  .text-purple-300,
  .text-blue-300,
  .text-green-300,
  .text-yellow-300,
  .text-indigo-300,
  .text-pink-300,
  .text-cyan-300 {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.9) !important;
    font-weight: 700 !important;
  }

  /* Better text readability for content */
  .text-gray-300 {
    color: rgba(255, 255, 255, 0.95) !important;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8) !important;
    font-weight: 500 !important;
  }

  /* Reduce background animation opacity on mobile */
  .leaky-code-container,
  [class*="leaky-code"],
  [class*="code-animation"],
  canvas {
    opacity: 0.3 !important;
  }
}

/* Ensure all interactive elements have proper touch handling */
@media (max-width: 768px) {
  /* Base touch optimizations for all interactive elements */
  button,
  a[href],
  [role="button"],
  input,
  textarea,
  select,
  [tabindex]:not([tabindex="-1"]) {
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
    pointer-events: auto !important;
    min-height: 44px;
    min-width: 44px;
    cursor: pointer;
  }

  /* Specific fixes for mobile hamburger menu */
  .md\:hidden button[aria-label*="Menu"],
  button[aria-label*="Open Menu"],
  button[aria-label*="Close Menu"] {
    touch-action: manipulation !important;
    pointer-events: auto !important;
    z-index: 1002 !important;
    position: relative !important;
    min-height: 48px !important;
    min-width: 48px !important;
    -webkit-tap-highlight-color: transparent !important;
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;
  }

  /* Specific fixes for close buttons */
  button[title="Close"],
  button[aria-label*="Close"],
  .close-button,
  [class*="close"] button,
  button:contains("Ã—"),
  button[class*="close"] {
    touch-action: manipulation !important;
    pointer-events: auto !important;
    z-index: 9999 !important;
    position: relative !important;
    min-height: 48px !important;
    min-width: 48px !important;
    -webkit-tap-highlight-color: transparent !important;
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;
    cursor: pointer !important;
  }

  /* Specific fixes for "See What We Offer" and similar CTA buttons */
  button:contains("See What We Offer"),
  [class*="welcome"] button,
  [class*="Welcome"] button,
  .cta-button,
  [class*="cta"] button {
    touch-action: manipulation !important;
    pointer-events: auto !important;
    z-index: 100 !important;
    position: relative !important;
    min-height: 56px !important;
    -webkit-tap-highlight-color: transparent !important;
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;
    cursor: pointer !important;
  }

  /* Fix for mobile menu dropdown */
  .mobile-menu,
  [class*="mobile"] [class*="menu"],
  .md\:hidden [class*="menu"] {
    touch-action: manipulation !important;
    pointer-events: auto !important;
    z-index: 1001 !important;
  }

  /* Fix for mobile menu backdrop */
  .mobile-menu-backdrop,
  [class*="backdrop"] {
    touch-action: manipulation !important;
    pointer-events: auto !important;
    z-index: 1000 !important;
  }

  /* Ensure chatbot elements don't block interactions when minimized */
  body.chat-minimized #chatbot-overlay,
  body.chat-minimized .chatbot-overlay {
    display: none !important;
    pointer-events: none !important;
    z-index: -1 !important;
  }

  /* Fix for any overlay elements that might block interactions */
  .overlay,
  [class*="overlay"]:not(.chatbot-overlay):not(#chatbot-overlay) {
    pointer-events: none !important;
  }

  /* Ensure floating elements don't interfere */
  .floating-button,
  [class*="floating"] button {
    touch-action: manipulation !important;
    pointer-events: auto !important;
    z-index: 9998 !important;
  }

  /* Fix for any elements with high z-index that might block interactions */
  [style*="z-index: 99999"],
  [style*="z-index: 999999"] {
    pointer-events: none !important;
  }

  /* But ensure interactive elements within high z-index containers work */
  [style*="z-index: 99999"] button,
  [style*="z-index: 99999"] a,
  [style*="z-index: 99999"] [role="button"],
  [style*="z-index: 999999"] button,
  [style*="z-index: 999999"] a,
  [style*="z-index: 999999"] [role="button"] {
    pointer-events: auto !important;
    touch-action: manipulation !important;
  }

  /* Prevent any elements from blocking touch events */
  * {
    -webkit-touch-callout: default;
  }

  /* Specific touch optimizations for motion elements */
  [class*="motion-"],
  .motion-div,
  .motion-button {
    touch-action: manipulation !important;
    pointer-events: auto !important;
  }

  /* Fix for any transform3d elements that might interfere */
  [style*="transform3d"],
  [style*="translateZ"] {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Ensure proper stacking context for interactive elements */
  button,
  a[href],
  [role="button"] {
    isolation: isolate;
    position: relative;
  }

  /* Fix for any elements with backdrop-filter that might interfere */
  [style*="backdrop-filter"]:not(button):not(a):not([role="button"]) {
    pointer-events: none !important;
  }

  /* But ensure interactive elements with backdrop-filter work */
  button[style*="backdrop-filter"],
  a[style*="backdrop-filter"],
  [role="button"][style*="backdrop-filter"] {
    pointer-events: auto !important;
    touch-action: manipulation !important;
  }

  /* Specific fix for navbar elements */
  nav button,
  .navbar button,
  header button {
    touch-action: manipulation !important;
    pointer-events: auto !important;
    z-index: 1002 !important;
    position: relative !important;
  }

  /* Fix for any fixed positioned elements that might interfere */
  .fixed:not(button):not(a):not([role="button"]):not(.floating-button):not([class*="chatbot"]) {
    pointer-events: none !important;
  }

  /* But ensure interactive elements within fixed containers work */
  .fixed button,
  .fixed a,
  .fixed [role="button"] {
    pointer-events: auto !important;
    touch-action: manipulation !important;
  }

  /* Ensure proper touch handling for form elements */
  input,
  textarea,
  select {
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1) !important;
  }

  /* Fix for any elements that might have pointer-events: none incorrectly applied */
  button[style*="pointer-events: none"],
  a[style*="pointer-events: none"],
  [role="button"][style*="pointer-events: none"] {
    pointer-events: auto !important;
  }
}

/* Additional fixes for touch devices */
@media (hover: none) and (pointer: coarse) {
  /* Optimize for touch-only devices */
  button,
  a[href],
  [role="button"] {
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
    min-height: 44px !important;
    min-width: 44px !important;
  }

  /* Remove hover effects on touch devices */
  button:hover,
  a:hover,
  [role="button"]:hover {
    transform: none !important;
  }

  /* Add active states for better touch feedback */
  button:active,
  a:active,
  [role="button"]:active {
    transform: scale(0.95) !important;
    transition: transform 0.1s ease !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  button,
  a[href],
  [role="button"] {
    border: 2px solid currentColor !important;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  button,
  a[href],
  [role="button"] {
    transition: none !important;
    animation: none !important;
  }
}

/* Enhanced frosted glass backgrounds for better text readability */
.bg-red-500\/10,
.bg-orange-500\/10,
.bg-purple-500\/10,
.bg-blue-500\/10,
.bg-green-500\/10,
.bg-yellow-500\/10,
.bg-indigo-500\/10,
.bg-pink-500\/10,
.bg-cyan-500\/10 {
  background-color: rgba(0, 0, 0, 0.7) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* Ensure text remains readable over background animations */
.leaky-code-container,
[class*="leaky-code"],
[class*="code-animation"] {
  z-index: -1 !important;
}

/* Information boxes with better contrast */
[class*="Enterprise"] h4,
[class*="enterprise"] h4,
.text-red-300,
.text-orange-300,
.text-purple-300,
.text-blue-300,
.text-green-300,
.text-yellow-300,
.text-indigo-300,
.text-pink-300,
.text-cyan-300 {
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8) !important;
  font-weight: 600 !important;
}

/* Ensure content text has good contrast */
.text-gray-300 {
  color: rgba(255, 255, 255, 0.9) !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6) !important;
}
